<mvc:View controllerName="tomapedido.controller.Main" xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns:fb="sap.ui.comp.filterbar"
    xmlns="sap.m">
    <Shell >
        <Page id="page" title="{i18n>title}">
            <headerContent>
                <Button text="{i18n>textRefresh}" press="_onbtnRefresh" type="Transparent" icon="sap-icon://refresh" tooltip="{i18n>tooltipbtnRefresh}"/>
                <Button text="{i18n>textHome}" press="_onbtnHome" type="Transparent" icon="sap-icon://home" tooltip="{i18n>tooltipbtnHome}"/>
            </headerContent>
            <content>
                <fb:FilterBar id="idFilterBar" filterContainerWidth="15rem" reset="onReset" search="_onSearchFB" showFilterConfiguration="true"
                    showRestoreButton="false" showClearOnFB="true" clear="_onClear">
                    <fb:filterItems>
                        <fb:FilterItem name="A" label="{i18n>lblDesde}">
                            <fb:control>
                                <DatePicker id="dpDateFilterDesde" width="auto" displayFormat="dd/MM/yyyy" visible="true" valueFormat="dd/MM/yyyy"
                                    value="{oModelPedidoVenta>/DataGeneral/filter/sDesde}" change="onInvoiceDateChange"/>
                            </fb:control>
                        </fb:FilterItem>
                        
                        <fb:FilterItem name="B" label="{i18n>lblHasta}">
                            <fb:control>
                                <DatePicker id="dpDateFilterHasta" width="auto" displayFormat="dd/MM/yyyy" visible="true" valueFormat="dd/MM/yyyy"
                                    value="{oModelPedidoVenta>/DataGeneral/filter/sHasta}" change="onInvoiceDateChange"/>
                            </fb:control>
                        </fb:FilterItem>
                        
                        <fb:FilterItem name="D" label="{i18n>lblCliente}">
                            <fb:control>
                                <ComboBox id="cbFilterCliente" selectedKey="{oModelPedidoVenta>/DataGeneral/filter/sCliente}" 
                                    items="{oModelGetPedidoVenta>/oClientePorVendedor}" change="onValidateChange">
                                    <core:ListItem key="{oModelGetPedidoVenta>Kunnr}" text="{oModelGetPedidoVenta>Stcd1} {oModelGetPedidoVenta>Namec}"/>
                                </ComboBox>
                            </fb:control>
                        </fb:FilterItem>

                        <fb:FilterItem name="E" label="{i18n>lblEstado}">
                            <fb:control>
                                <ComboBox id="cbFilterEstado" selectedKey="{oModelPedidoVenta>/DataGeneral/filter/sEstado}" 
                                    items="{oModelGetPedidoVenta>/oEstado}" change="onValidateChange">
                                    <core:ListItem key="{oModelGetPedidoVenta>key}" text="{oModelGetPedidoVenta>desc}"/>
                                </ComboBox>
                            </fb:control>
                        </fb:FilterItem>
                    </fb:filterItems>
                </fb:FilterBar>
                <VBox >
                    <VBox id="vbTableDetalle">
                        <core:Fragment fragmentName="tomapedido.view.fragments.TableMain" type="XML"/>
                    </VBox>
                </VBox>
            </content>
        </Page>
    </Shell >
</mvc:View>
